- name: Add Prometheus community Helm repository
  shell: helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
  args:
    creates: /etc/helm/repository/prometheus-community

- name: Update Helm repositories
  shell: helm repo update

- name: Install or upgrade Prometheus using Helm
  shell: helm upgrade --install prometheus prometheus-community/prometheus -f {{ playbook_dir }}/roles/setup_prometheus/values.yml
